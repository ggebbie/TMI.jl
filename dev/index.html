<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Top-level functions · TMI.jl</title><meta name="title" content="Top-level functions · TMI.jl"/><meta property="og:title" content="Top-level functions · TMI.jl"/><meta property="twitter:title" content="Top-level functions · TMI.jl"/><meta name="description" content="Documentation for TMI.jl."/><meta property="og:description" content="Documentation for TMI.jl."/><meta property="twitter:description" content="Documentation for TMI.jl."/><meta property="og:url" content="https://ggebbie.github.io/TMI.jl/"/><meta property="twitter:url" content="https://ggebbie.github.io/TMI.jl/"/><link rel="canonical" href="https://ggebbie.github.io/TMI.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>TMI.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Top-level functions</a></li><li><a class="tocitem" href="config/">Configuration</a></li><li><a class="tocitem" href="grid/">Grid</a></li><li><a class="tocitem" href="boundaries/">Boundary Conditions</a></li><li><a class="tocitem" href="plots/">Plots</a></li><li><a class="tocitem" href="utils/">Utilities</a></li><li><a class="tocitem" href="functions/">Function List</a></li><li><a class="tocitem" href="legacy/">Older functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Top-level functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Top-level functions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ggebbie/TMI.jl/blob/main/docs/src/index.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Top-level-functions"><a class="docs-heading-anchor" href="#Top-level-functions">Top-level functions</a><a id="Top-level-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Top-level-functions" title="Permalink"></a></h1><p>Main functionality for <a href="https://github.com/ggebbie/TMI.jl">TMI</a>.</p><article><details class="docstring" open="true"><summary id="TMI.trackpathways"><a class="docstring-binding" href="#TMI.trackpathways"><code>TMI.trackpathways</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function trackpathways(TMIversion,latbox,lonbox)
Track the pathways of a user-defined water mass.
 Steps: (a) define the water mass by a rectangular surface patch dyed with passive tracer concentration of         (b) propagate the dye with the matrix A, with the result being the fraction of water originating from the surface region.
 See Section 2b of Gebbie &amp; Huybers 2010, esp. eqs. (15)-(17).</code></pre><p><strong>Arguments</strong></p><ul><li><code>TMIversion</code>: version of TMI water-mass/circulation model</li><li><code>latbox</code>: min and max latitude of box</li><li><code>lonbox</code>: min and max longitude of box</li><li><code>γ</code>: TMI grid</li></ul><p><strong>Output</strong></p><ul><li><code>c</code>: fraction of water from surface source</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ggebbie/TMI.jl/blob/5d6bfda6944ce26b709c4fff53cbcb4e9b9b7bdc/src/TMI.jl#L105-L118">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TMI.watermassdistribution"><a class="docstring-binding" href="#TMI.watermassdistribution"><code>TMI.watermassdistribution</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function watermassdistribution(TMIversion,latbox,lonbox)
Track the pathways of a user-defined water mass.
 Steps: (a) define the water mass by an oceanographically-relevant surface patch dyed with passive tracer concentration of one
     (b) propagate the dye with the matrix A, with the result being the fraction of water originating from the surface region.
 See Section 2b of Gebbie &amp; Huybers 2010, esp. eqs. (15)-(17).</code></pre><p><strong>Arguments</strong></p><ul><li><code>TMIversion</code>: version of TMI water-mass/circulation model</li><li><code>Alu</code>: LU decomposition of water-mass matrix A</li><li><code>region</code>: name of pre-defined surface region</li><li><code>γ</code>: TMI grid</li></ul><p><strong>Output</strong></p><ul><li><code>g</code>: water-mass fraction</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ggebbie/TMI.jl/blob/5d6bfda6944ce26b709c4fff53cbcb4e9b9b7bdc/src/TMI.jl#L126-L140">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TMI.volumefilled"><a class="docstring-binding" href="#TMI.volumefilled"><code>TMI.volumefilled</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function volumefilled(TMIversion)
Find the ocean volume that has originated from each surface box.
 This is equivalent to solving a sensitivity problem:
 The total volume is V = vᵀ c , where v is the volume of each box 
 and c is the fraction of volume from a given source which
 satisfies the equation A c = d.                     
 Next, dV/d(d) = A⁻ᵀ v, and dV/d(d) is exactly the volume originating from each source.

 See Section 3 and Supplementary Section 4, Gebbie &amp; Huybers 2011.</code></pre><p><strong>Arguments</strong></p><ul><li><code>TMIversion</code>: version of TMI water-mass/circulation model</li><li><code>Alu</code>: LU decomposition of water-mass matrix A</li><li><code>γ</code>: TMI.grid</li></ul><p><strong>Output</strong></p><ul><li><code>volume</code>: log10 of global ocean volume filled by a surface region, exists at surface, therefore given BoundaryCondition type</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ggebbie/TMI.jl/blob/5d6bfda6944ce26b709c4fff53cbcb4e9b9b7bdc/src/TMI.jl#L347-L364">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TMI.surfaceorigin"><a class="docstring-binding" href="#TMI.surfaceorigin"><code>TMI.surfaceorigin</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function surfaceorigin(TMIversion,loc)
 Find the surface origin of water for some interior box 
 This is equivalent to solving a sensitivity problem:
 The mass fraction at a location `loc` of interest is 
`c[loc] = δᵀ c`, where `δ` samples the location of the global mass-fraction variable, c.
Then the sensitivity of `c[loc]` is: d(c[loc])/d(d) = A⁻ᵀ δ.
The derivative is solved using the constraint: Ac = d.
The sensitivity is exactly the mass fraction originating from each source.      
This problem is mathematically similar to determining how the ocean is filled.</code></pre><p><strong>Arguments</strong></p><ul><li><code>loc</code>: location (lon,lat,depth) of location of interest</li><li><code>Alu</code>: LU decomposition of water-mass matrix A</li><li><code>γ</code>: TMI grid</li></ul><p><strong>Output</strong></p><ul><li><code>origin</code>: surface map of fraction of source water for a given location, log10 of effective depth, in terms of a BoundaryCondition</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ggebbie/TMI.jl/blob/5d6bfda6944ce26b709c4fff53cbcb4e9b9b7bdc/src/TMI.jl#L454-L471">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TMI.meanage"><a class="docstring-binding" href="#TMI.meanage"><code>TMI.meanage</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function meanage(TMIversion,Alu,γ)
Mean or ideal age</code></pre><p><strong>Arguments</strong></p><ul><li><code>TMIversion</code>: version of TMI water-mass/circulation model</li><li><code>Alu</code>: LU decomposition of water-mass matrix A</li><li><code>γ</code>: TMI grid</li></ul><p><strong>Output</strong></p><ul><li><code>a</code>: mean age [yr]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ggebbie/TMI.jl/blob/5d6bfda6944ce26b709c4fff53cbcb4e9b9b7bdc/src/TMI.jl#L232-L242">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="config/">Configuration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 27 November 2025 00:14">Thursday 27 November 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
